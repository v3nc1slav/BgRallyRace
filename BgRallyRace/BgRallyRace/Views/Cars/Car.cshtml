@model BgRallyRace.ViewModels.CarViewModels
@{
    ViewData["Title"] = "Car";
}
@if (Model.Text != null)
{
    if (@Model.Text.Contains("успешно"))
    {
        <div class="alert alert-success" role="alert">
            <strong>Чудесно!</strong> @Model.Text
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    }
    else if(@Model.Text.Contains("Часта"))
    {
        <div class="alert alert-primary" role="alert">
            <strong>Не възможно действие!</strong> @Model.Text
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    }
    else
    {
        <div class="alert alert-danger" role="alert">
            <strong>Не възможно действие!</strong> @Model.Text
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    }
}

<div class="form-group row">
    <div class="col-sm-2">
        <partial name="_LeftBarPartial" />
    </div>
    <div class="col-sm-8">
        <a class=" background">
            <table class="table table-hover">
                <thead>
                    <tr class="table">
                        <th scope="col">Част</th>
                        <th scope="col">Здравина</th>
                        <th scope="col">Максимална Скорост</th>
                        <th scope="col">Текуща скорост</th>
                        <th scope="col">Цена ремонт</th>
                        <th scope="col"> </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">Аеродинамика</th>
                        <td>@Model.Aerodynamics.Strength</td>
                        <td>@Model.Aerodynamics.Speed</td>
                        <td>@Model.CurrentSpeedAerodynamics</td>
                        <td>@Model.RepairPriceAerodynamics</td>
                        <td>
                            <form asp-controller="Cars" asp-action="Repair" asp-route-id="@Model.Aerodynamics.Id" method="post" class="form-group">
                                <button type="submit" class="btn btn-primary" name="type" value="Aerodynamics @Model.RepairPriceAerodynamics @User.Identity.Name">Ремонтирай</button>
                            </form>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">Спирачки</th>
                        <td>@Model.Brakes.Strength</td>
                        <td>@Model.Brakes.Speed</td>
                        <td>@Model.CurrentSpeedBrakes</td>
                        <td>@Model.RepairPriceBrakes </td>
                        <td>
                            <form asp-controller="Cars" asp-action="Repair" asp-route-id="@Model.Brakes.Id" method="post" class="form-group">
                                <button type="submit" class="btn btn-primary" name="type" value="Brakes @Model.RepairPriceBrakes  @User.Identity.Name">Ремонтирай</button>
                            </form>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">Двигател</th>
                        <td>@Model.Engines.Strength</td>
                        <td>@Model.Engines.Speed</td>
                        <td>@Model.CurrentSpeedEngines</td>
                        <td>@Model.RepairPriceEngines</td>
                        <td>
                            <form asp-controller="Cars" asp-action="Repair" asp-route-id="@Model.Engines.Id" method="post" class="form-group">
                                <button type="submit" class="btn btn-primary" name="type" value="Engines @Model.RepairPriceEngines @User.Identity.Name">Ремонтирай</button>
                            </form>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">Скоростна кутия</th>
                        <td>@Model.Gearboxs.Strength</td>
                        <td>@Model.Gearboxs.Speed</td>
                        <td>@Model.CurrentSpeedGearboxs</td>
                        <td>@Model.RepairPriceGearboxs</td>
                        <td>
                            <form asp-controller="Cars" asp-action="Repair" asp-route-id="@Model.Gearboxs.Id" method="post" class="form-group">
                                <button type="submit" class="btn btn-primary" name="type" value="Gearboxs @Model.RepairPriceGearboxs @User.Identity.Name">Ремонтирай</button>
                            </form>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">Купе</th>
                        <td>@Model.ModelsCars.Strength</td>
                        <td>@Model.ModelsCars.Speed</td>
                        <td>@Model.CurrentSpeedModelsCars</td>
                        <td>@Model.RepairPriceModelsCars</td>
                        <td>
                            <form asp-controller="Cars" asp-action="Repair" asp-route-id="@Model.ModelsCars.Id" method="post" class="form-group">
                                <button type="submit" class="btn btn-primary" name="type" value="ModelsCars @Model.RepairPriceModelsCars @User.Identity.Name">Ремонтирай</button>
                            </form>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">Шаси</th>
                        <td>@Model.Mountings.Strength</td>
                        <td>@Model.Mountings.Speed</td>
                        <td>@Model.CurrentSpeedMountings</td>
                        <td>@Model.RepairPriceMountings</td>
                        <td>
                            <form asp-controller="Cars" asp-action="Repair" asp-route-id="@Model.Mountings.Id" method="post" class="form-group">
                                <button type="submit" class="btn btn-primary" name="type" value="Mountings @Model.RepairPriceMountings @User.Identity.Name">Ремонтирай</button>
                            </form>
                        </td>
                    </tr>
                    @if (!(Model.Turbo == null))
                    {
                        <tr>
                            <th scope="row">Тирбо</th>
                            <td>@Model.Turbo.Strength</td>
                            <td>@Model.Turbo.Speed</td>
                            <td>@Model.CurrentSpeedTurbo</td>
                            <td>@Model.RepairPriceTurbo</td>
                            <td>
                                <form asp-controller="Cars" asp-action="Repair" asp-route-id="@Model.Turbo.Id" method="post" class="form-group">
                                    <button type="submit" class="btn btn-primary" name="type" value="Turbo @Model.RepairPriceTurbo @User.Identity.Name">Ремонтирай</button>
                                </form>
                            </td>
                        </tr>
                    }
                </tbody>
                <tfoot>
                    <tr class="table">
                        <th scope="row">Обща скорост</th>
                        <td></td>
                        <td>@Model.MaxSpeed</td>
                        <td id="maxSpeed"></td>
                        <td></td>
                    </tr>
                </tfoot>
            </table>
        </a>
    </div>
    <div class="col-sm-2">
        <partial name="_RightBarPartial" />
    </div>
</div>


@section Scripts{
    <script>
        var x = setInterval(function () {
            var maxSpeed = @Model.CurrentSpeedAerodynamics+@Model.CurrentSpeedBrakes+@Model.CurrentSpeedEngines
                +@Model.CurrentSpeedGearboxs+ @Model.CurrentSpeedModelsCars+@Model.CurrentSpeedMountings
            document.getElementById("maxSpeed").innerHTML = maxSpeed;
        });
    </script>
}